{"remainingRequest":"/home/lxt/FinancialPlatform/iview-admin/node_modules/babel-loader/lib/index.js!/home/lxt/FinancialPlatform/iview-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/lxt/FinancialPlatform/iview-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lxt/FinancialPlatform/iview-admin/src/components/main/components/tags-nav/tags-nav.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lxt/FinancialPlatform/iview-admin/src/components/main/components/tags-nav/tags-nav.vue","mtime":1583204240000},{"path":"/home/lxt/FinancialPlatform/iview-admin/.babelrc","mtime":1583204240000},{"path":"/home/lxt/FinancialPlatform/iview-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lxt/FinancialPlatform/iview-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/lxt/FinancialPlatform/iview-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lxt/FinancialPlatform/iview-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { showTitle, routeEqual } from '@/libs/util';\nimport beforeClose from '@/router/before-close';\nexport default {\n  name: 'TagsNav',\n  props: {\n    value: Object,\n    list: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      tagBodyLeft: 0,\n      rightOffset: 40,\n      outerPadding: 4,\n      contextMenuLeft: 0,\n      contextMenuTop: 0,\n      visible: false,\n      menuList: {\n        others: '关闭其他',\n        all: '关闭所有'\n      }\n    };\n  },\n  computed: {\n    currentRouteObj: function currentRouteObj() {\n      var _this$value = this.value,\n          name = _this$value.name,\n          params = _this$value.params,\n          query = _this$value.query;\n      return {\n        name: name,\n        params: params,\n        query: query\n      };\n    }\n  },\n  methods: {\n    handlescroll: function handlescroll(e) {\n      var type = e.type;\n      var delta = 0;\n\n      if (type === 'DOMMouseScroll' || type === 'mousewheel') {\n        delta = e.wheelDelta ? e.wheelDelta : -(e.detail || 0) * 40;\n      }\n\n      this.handleScroll(delta);\n    },\n    handleScroll: function handleScroll(offset) {\n      var outerWidth = this.$refs.scrollOuter.offsetWidth;\n      var bodyWidth = this.$refs.scrollBody.offsetWidth;\n\n      if (offset > 0) {\n        this.tagBodyLeft = Math.min(0, this.tagBodyLeft + offset);\n      } else {\n        if (outerWidth < bodyWidth) {\n          if (this.tagBodyLeft < -(bodyWidth - outerWidth)) {\n            this.tagBodyLeft = this.tagBodyLeft;\n          } else {\n            this.tagBodyLeft = Math.max(this.tagBodyLeft + offset, outerWidth - bodyWidth);\n          }\n        } else {\n          this.tagBodyLeft = 0;\n        }\n      }\n    },\n    handleTagsOption: function handleTagsOption(type) {\n      var _this = this;\n\n      if (type.includes('all')) {\n        // 关闭所有，除了home\n        var res = this.list.filter(function (item) {\n          return item.name === _this.$config.homeName;\n        });\n        this.$emit('on-close', res, 'all');\n      } else if (type.includes('others')) {\n        // 关闭除当前页和home页的其他页\n        var _res = this.list.filter(function (item) {\n          return routeEqual(_this.currentRouteObj, item) || item.name === _this.$config.homeName;\n        });\n\n        this.$emit('on-close', _res, 'others', this.currentRouteObj);\n        setTimeout(function () {\n          _this.getTagElementByRoute(_this.currentRouteObj);\n        }, 100);\n      }\n    },\n    handleClose: function handleClose(current) {\n      var _this2 = this;\n\n      if (current.meta && current.meta.beforeCloseName && current.meta.beforeCloseName in beforeClose) {\n        new Promise(beforeClose[current.meta.beforeCloseName]).then(function (close) {\n          if (close) {\n            _this2.close(current);\n          }\n        });\n      } else {\n        this.close(current);\n      }\n    },\n    close: function close(route) {\n      var res = this.list.filter(function (item) {\n        return !routeEqual(route, item);\n      });\n      this.$emit('on-close', res, undefined, route);\n    },\n    handleClick: function handleClick(item) {\n      this.$emit('input', item);\n    },\n    showTitleInside: function showTitleInside(item) {\n      return showTitle(item, this);\n    },\n    isCurrentTag: function isCurrentTag(item) {\n      return routeEqual(this.currentRouteObj, item);\n    },\n    moveToView: function moveToView(tag) {\n      var outerWidth = this.$refs.scrollOuter.offsetWidth;\n      var bodyWidth = this.$refs.scrollBody.offsetWidth;\n\n      if (bodyWidth < outerWidth) {\n        this.tagBodyLeft = 0;\n      } else if (tag.offsetLeft < -this.tagBodyLeft) {\n        // 标签在可视区域左侧\n        this.tagBodyLeft = -tag.offsetLeft + this.outerPadding;\n      } else if (tag.offsetLeft > -this.tagBodyLeft && tag.offsetLeft + tag.offsetWidth < -this.tagBodyLeft + outerWidth) {\n        // 标签在可视区域\n        this.tagBodyLeft = Math.min(0, outerWidth - tag.offsetWidth - tag.offsetLeft - this.outerPadding);\n      } else {\n        // 标签在可视区域右侧\n        this.tagBodyLeft = -(tag.offsetLeft - (outerWidth - this.outerPadding - tag.offsetWidth));\n      }\n    },\n    getTagElementByRoute: function getTagElementByRoute(route) {\n      var _this3 = this;\n\n      this.$nextTick(function () {\n        _this3.refsTag = _this3.$refs.tagsPageOpened;\n\n        _this3.refsTag.forEach(function (item, index) {\n          if (routeEqual(route, item.$attrs['data-route-item'])) {\n            var tag = _this3.refsTag[index].$el;\n\n            _this3.moveToView(tag);\n          }\n        });\n      });\n    },\n    contextMenu: function contextMenu(item, e) {\n      if (item.name === this.$config.homeName) {\n        return;\n      }\n\n      this.visible = true;\n      var offsetLeft = this.$el.getBoundingClientRect().left;\n      this.contextMenuLeft = e.clientX - offsetLeft + 10;\n      this.contextMenuTop = e.clientY - 64;\n    },\n    closeMenu: function closeMenu() {\n      this.visible = false;\n    }\n  },\n  watch: {\n    '$route': function $route(to) {\n      this.getTagElementByRoute(to);\n    },\n    visible: function visible(value) {\n      if (value) {\n        document.body.addEventListener('click', this.closeMenu);\n      } else {\n        document.body.removeEventListener('click', this.closeMenu);\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this4 = this;\n\n    setTimeout(function () {\n      _this4.getTagElementByRoute(_this4.$route);\n    }, 200);\n  }\n};",{"version":3,"sources":["tags-nav.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"tags-nav\">\n    <div class=\"close-con\">\n      <Dropdown transfer @on-click=\"handleTagsOption\" style=\"margin-top:7px;\">\n        <Button size=\"small\" type=\"text\">\n          <Icon :size=\"18\" type=\"ios-close-circle-outline\" />\n        </Button>\n        <DropdownMenu slot=\"list\">\n          <DropdownItem name=\"close-all\">关闭所有</DropdownItem>\n          <DropdownItem name=\"close-others\">关闭其他</DropdownItem>\n        </DropdownMenu>\n      </Dropdown>\n    </div>\n    <ul v-show=\"visible\" :style=\"{left: contextMenuLeft + 'px', top: contextMenuTop + 'px'}\" class=\"contextmenu\">\n      <li v-for=\"(item, key) of menuList\" @click=\"handleTagsOption(key)\" :key=\"key\">{{item}}</li>\n    </ul>\n    <div class=\"btn-con left-btn\">\n      <Button type=\"text\" @click=\"handleScroll(240)\">\n        <Icon :size=\"18\" type=\"ios-arrow-back\" />\n      </Button>\n    </div>\n    <div class=\"btn-con right-btn\">\n      <Button type=\"text\" @click=\"handleScroll(-240)\">\n        <Icon :size=\"18\" type=\"ios-arrow-forward\" />\n      </Button>\n    </div>\n    <div class=\"scroll-outer\" ref=\"scrollOuter\" @DOMMouseScroll=\"handlescroll\" @mousewheel=\"handlescroll\">\n      <div ref=\"scrollBody\" class=\"scroll-body\" :style=\"{left: tagBodyLeft + 'px'}\">\n        <transition-group name=\"taglist-moving-animation\">\n          <Tag\n            type=\"dot\"\n            v-for=\"(item, index) in list\"\n            ref=\"tagsPageOpened\"\n            :key=\"`tag-nav-${index}`\"\n            :name=\"item.name\"\n            :data-route-item=\"item\"\n            @on-close=\"handleClose(item)\"\n            @click.native=\"handleClick(item)\"\n            :closable=\"item.name !== $config.homeName\"\n            :color=\"isCurrentTag(item) ? 'primary' : 'default'\"\n            @contextmenu.prevent.native=\"contextMenu(item, $event)\"\n          >{{ showTitleInside(item) }}</Tag>\n        </transition-group>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { showTitle, routeEqual } from '@/libs/util'\nimport beforeClose from '@/router/before-close'\nexport default {\n  name: 'TagsNav',\n  props: {\n    value: Object,\n    list: {\n      type: Array,\n      default () {\n        return []\n      }\n    }\n  },\n  data () {\n    return {\n      tagBodyLeft: 0,\n      rightOffset: 40,\n      outerPadding: 4,\n      contextMenuLeft: 0,\n      contextMenuTop: 0,\n      visible: false,\n      menuList: {\n        others: '关闭其他',\n        all: '关闭所有'\n      }\n    }\n  },\n  computed: {\n    currentRouteObj () {\n      const { name, params, query } = this.value\n      return { name, params, query }\n    }\n  },\n  methods: {\n    handlescroll (e) {\n      var type = e.type\n      let delta = 0\n      if (type === 'DOMMouseScroll' || type === 'mousewheel') {\n        delta = (e.wheelDelta) ? e.wheelDelta : -(e.detail || 0) * 40\n      }\n      this.handleScroll(delta)\n    },\n    handleScroll (offset) {\n      const outerWidth = this.$refs.scrollOuter.offsetWidth\n      const bodyWidth = this.$refs.scrollBody.offsetWidth\n      if (offset > 0) {\n        this.tagBodyLeft = Math.min(0, this.tagBodyLeft + offset)\n      } else {\n        if (outerWidth < bodyWidth) {\n          if (this.tagBodyLeft < -(bodyWidth - outerWidth)) {\n            this.tagBodyLeft = this.tagBodyLeft\n          } else {\n            this.tagBodyLeft = Math.max(this.tagBodyLeft + offset, outerWidth - bodyWidth)\n          }\n        } else {\n          this.tagBodyLeft = 0\n        }\n      }\n    },\n    handleTagsOption (type) {\n      if (type.includes('all')) {\n        // 关闭所有，除了home\n        let res = this.list.filter(item => item.name === this.$config.homeName)\n        this.$emit('on-close', res, 'all')\n      } else if (type.includes('others')) {\n        // 关闭除当前页和home页的其他页\n        let res = this.list.filter(item => routeEqual(this.currentRouteObj, item) || item.name === this.$config.homeName)\n        this.$emit('on-close', res, 'others', this.currentRouteObj)\n        setTimeout(() => {\n          this.getTagElementByRoute(this.currentRouteObj)\n        }, 100)\n      }\n    },\n    handleClose (current) {\n      if (current.meta && current.meta.beforeCloseName && current.meta.beforeCloseName in beforeClose) {\n        new Promise(beforeClose[current.meta.beforeCloseName]).then(close => {\n          if (close) {\n            this.close(current)\n          }\n        })\n      } else {\n        this.close(current)\n      }\n    },\n    close (route) {\n      let res = this.list.filter(item => !routeEqual(route, item))\n      this.$emit('on-close', res, undefined, route)\n    },\n    handleClick (item) {\n      this.$emit('input', item)\n    },\n    showTitleInside (item) {\n      return showTitle(item, this)\n    },\n    isCurrentTag (item) {\n      return routeEqual(this.currentRouteObj, item)\n    },\n    moveToView (tag) {\n      const outerWidth = this.$refs.scrollOuter.offsetWidth\n      const bodyWidth = this.$refs.scrollBody.offsetWidth\n      if (bodyWidth < outerWidth) {\n        this.tagBodyLeft = 0\n      } else if (tag.offsetLeft < -this.tagBodyLeft) {\n        // 标签在可视区域左侧\n        this.tagBodyLeft = -tag.offsetLeft + this.outerPadding\n      } else if (tag.offsetLeft > -this.tagBodyLeft && tag.offsetLeft + tag.offsetWidth < -this.tagBodyLeft + outerWidth) {\n        // 标签在可视区域\n        this.tagBodyLeft = Math.min(0, outerWidth - tag.offsetWidth - tag.offsetLeft - this.outerPadding)\n      } else {\n        // 标签在可视区域右侧\n        this.tagBodyLeft = -(tag.offsetLeft - (outerWidth - this.outerPadding - tag.offsetWidth))\n      }\n    },\n    getTagElementByRoute (route) {\n      this.$nextTick(() => {\n        this.refsTag = this.$refs.tagsPageOpened\n        this.refsTag.forEach((item, index) => {\n          if (routeEqual(route, item.$attrs['data-route-item'])) {\n            let tag = this.refsTag[index].$el\n            this.moveToView(tag)\n          }\n        })\n      })\n    },\n    contextMenu (item, e) {\n      if (item.name === this.$config.homeName) {\n        return\n      }\n      this.visible = true\n      const offsetLeft = this.$el.getBoundingClientRect().left\n      this.contextMenuLeft = e.clientX - offsetLeft + 10\n      this.contextMenuTop = e.clientY - 64\n    },\n    closeMenu () {\n      this.visible = false\n    }\n  },\n  watch: {\n    '$route' (to) {\n      this.getTagElementByRoute(to)\n    },\n    visible (value) {\n      if (value) {\n        document.body.addEventListener('click', this.closeMenu)\n      } else {\n        document.body.removeEventListener('click', this.closeMenu)\n      }\n    }\n  },\n  mounted () {\n    setTimeout(() => {\n      this.getTagElementByRoute(this.$route)\n    }, 200)\n  }\n}\n</script>\n\n<style lang=\"less\">\n@import './tags-nav.less';\n</style>\n"],"sourceRoot":"src/components/main/components/tags-nav"}]}